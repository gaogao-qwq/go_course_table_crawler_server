package handlers

import (
	"course_table_server/internal/app/server/crawler"
	"encoding/json"
	"fmt"
	"net/http"
)

func CourseTableHandler(w http.ResponseWriter, r *http.Request) {
	fmt.Println("Handle /course-table, ", "Method: ", r.Method)
	w.Header().Set("Content-Type", "application/json")

	// 不响应 非 GET 请求
	if r.Method != http.MethodGet {
		w.WriteHeader(http.StatusForbidden)
		_, err := w.Write([]byte(`"message": "ONLY GET requests are allowed"`))
		if err != nil {
			panic(err)
		}
		return
	}

	// 对无验证头的 GET 请求返回 StatusUnauthorized
	if r.Method == http.MethodGet && r.Header["Authorization"] == nil {
		w.WriteHeader(http.StatusUnauthorized)
		_, err := w.Write([]byte(`"message": "GET requests without Authorization Header are not allowed"`))
		if err != nil {
			panic(err)
		}
		return
	}

	// 从请求头中获取 Basic 验证 token
	username, password, ok := r.BasicAuth()
	if !ok {
		w.WriteHeader(http.StatusUnauthorized)
		_, err := w.Write([]byte(`"message": "No basic auth present"`))
		if err != nil {
			panic(err)
		}
		return
	}

	semesterId := r.Header.Get("semesterId")
	if semesterId == "" {
		w.WriteHeader(http.StatusNotAcceptable)
		return
	}

	fmt.Println("username:", username, "\npassword", password)

	w.WriteHeader(http.StatusOK)
	courseTable, err := crawler.GetCourseTable("http://jw.gzgs.edu.cn/eams/login.action", username, password, semesterId)
	err = json.NewEncoder(w).Encode(courseTable)
	// Debug code
	// _, err = w.Write([]byte(`{"row":12,"col":7,"week":20,"data":[{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":1,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (刘仲源)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":1,"dateNum":4},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":1,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":1,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":1,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":1,"dateNum":4},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (刘仲源)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":1,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":1,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":1,"dateNum":4},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":2,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":2,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":2,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":2,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":2,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":2,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":2,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (刘仲源)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":2,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":2,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":2,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":2,"dateNum":6},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":3,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":4,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":4,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":4,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":4,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":4,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":4,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":4,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":4,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":4,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":4,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":4,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":5,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":5,"dateNum":4},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":5,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":5,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":5,"dateNum":4},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":5,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":5,"dateNum":4},{"isEmpty":false,"courseId":"110010008.B1","courseName":"形势与政策及德学教育Ⅳ[110010008.B1] (张新宇)","locationName":"教I-D504(D-M)","sectionBegin":9,"sectionLength":2,"weekNum":5,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":5,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":5,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":5,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":5,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":6,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":6,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":6,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":6,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":6,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":6,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":6,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":6,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":6,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":6,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":6,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":7,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":7,"dateNum":4},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":7,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":7,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":7,"dateNum":4},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":7,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":7,"dateNum":4},{"isEmpty":false,"courseId":"110010008.B1","courseName":"形势与政策及德学教育Ⅳ[110010008.B1] (张新宇)","locationName":"教I-D504(D-M)","sectionBegin":9,"sectionLength":2,"weekNum":7,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":7,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":7,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":7,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":7,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":8,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":8,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":8,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":8,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":8,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":8,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":8,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":8,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":8,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":8,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":8,"dateNum":6},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":9,"dateNum":4},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"","sectionBegin":1,"sectionLength":2,"weekNum":9,"dateNum":6},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"","sectionBegin":1,"sectionLength":3,"weekNum":9,"dateNum":7},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":9,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":9,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":9,"dateNum":4},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"","sectionBegin":5,"sectionLength":3,"weekNum":9,"dateNum":6},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":9,"dateNum":1},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"教I-D402(D-M)","sectionBegin":7,"sectionLength":2,"weekNum":9,"dateNum":2},{"isEmpty":false,"courseId":"110010008.B1","courseName":"形势与政策及德学教育Ⅳ[110010008.B1] (张新宇)","locationName":"教I-D504(D-M)","sectionBegin":9,"sectionLength":2,"weekNum":9,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":9,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":9,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":9,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":9,"dateNum":6},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"","sectionBegin":1,"sectionLength":3,"weekNum":10,"dateNum":7},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":10,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":10,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"","sectionBegin":5,"sectionLength":3,"weekNum":10,"dateNum":6},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":10,"dateNum":1},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":10,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":10,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":10,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":10,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":10,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":11,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":11,"dateNum":4},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"","sectionBegin":1,"sectionLength":2,"weekNum":11,"dateNum":6},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":11,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":11,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":11,"dateNum":4},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":11,"dateNum":1},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"教I-D402(D-M)","sectionBegin":7,"sectionLength":2,"weekNum":11,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":11,"dateNum":4},{"isEmpty":false,"courseId":"110010008.B1","courseName":"形势与政策及德学教育Ⅳ[110010008.B1] (张新宇)","locationName":"教I-D504(D-M)","sectionBegin":9,"sectionLength":2,"weekNum":11,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":11,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":11,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":11,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":11,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":12,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":12,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":12,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":12,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":12,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":12,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":12,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":12,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":12,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":12,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":12,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":13,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":13,"dateNum":4},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"","sectionBegin":1,"sectionLength":2,"weekNum":13,"dateNum":6},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":13,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":13,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":13,"dateNum":4},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":13,"dateNum":1},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"教I-D402(D-M)","sectionBegin":7,"sectionLength":2,"weekNum":13,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":13,"dateNum":4},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":13,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":13,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":13,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":13,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":14,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":14,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":14,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":14,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":14,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":14,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":14,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":14,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":14,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":14,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":14,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":15,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":15,"dateNum":4},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"","sectionBegin":1,"sectionLength":2,"weekNum":15,"dateNum":6},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":15,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":15,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":15,"dateNum":4},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":15,"dateNum":1},{"isEmpty":false,"courseId":"512010002.06","courseName":"劳动教育II[512010002.06] (杨宇静)","locationName":"教I-D402(D-M)","sectionBegin":7,"sectionLength":2,"weekNum":15,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":15,"dateNum":4},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":15,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":15,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":15,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":15,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":16,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":16,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":16,"dateNum":3},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":16,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":16,"dateNum":2},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":16,"dateNum":4},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-C401(J)","sectionBegin":7,"sectionLength":2,"weekNum":16,"dateNum":5},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":16,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":16,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":16,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":16,"dateNum":6},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":1,"sectionLength":2,"weekNum":17,"dateNum":1},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C405(D-S)","sectionBegin":1,"sectionLength":2,"weekNum":17,"dateNum":4},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-D201(J)","sectionBegin":3,"sectionLength":2,"weekNum":17,"dateNum":1},{"isEmpty":false,"courseId":"106010706.03","courseName":"数据库概论[106010706.03] (洪晓彬)","locationName":"实I-A204(J)","sectionBegin":3,"sectionLength":2,"weekNum":17,"dateNum":3},{"isEmpty":false,"courseId":"110010021.35","courseName":"毛泽东思想和中国特色社会主义理论体系概论[110010021.35] (刘于亮)","locationName":"教I-D401(D-M)","sectionBegin":3,"sectionLength":2,"weekNum":17,"dateNum":4},{"isEmpty":false,"courseId":"B340007.57","courseName":"大学体育Ⅳ[B340007.57] (陈晓燕)","locationName":"","sectionBegin":7,"sectionLength":2,"weekNum":17,"dateNum":1},{"isEmpty":false,"courseId":"110010003.34","courseName":"中国近现代史纲要[110010003.34] (赵阳)","locationName":"教I-C206(D-S)","sectionBegin":7,"sectionLength":2,"weekNum":17,"dateNum":4},{"isEmpty":false,"courseId":"111010006.03","courseName":"概率论与数理统计[111010006.03] (姚雪超)","locationName":"教II-C104(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":17,"dateNum":2},{"isEmpty":false,"courseId":"106010313.07","courseName":"HTML5移动Web开发[106010313.07] (朱文彬)","locationName":"实I-B203(J)","sectionBegin":9,"sectionLength":2,"weekNum":17,"dateNum":3},{"isEmpty":false,"courseId":"B00002.75","courseName":"创新创业训练[B00002.75] (乔梁)","locationName":"教I-C305(D-S)","sectionBegin":9,"sectionLength":2,"weekNum":17,"dateNum":4},{"isEmpty":false,"courseId":"508000056.01","courseName":"从“愚昧”到“科学”：科学技术简史[508000056.01] (徐绍铜)","locationName":"超星尔雅(网课)","sectionBegin":11,"sectionLength":2,"weekNum":17,"dateNum":6}]}`))
	if err != nil {
		err = json.NewEncoder(w).Encode(crawler.CourseTable{Row: 0, Col: 0, Week: 0, Data: nil})
	}
}
